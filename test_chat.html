<!DOCTYPE html>
<html>
<head>
    <title>Chat Test</title>
    <style>
        .chat-messages { height: 400px; border: 1px solid #ccc; overflow-y: auto; padding: 10px; }
        .message { margin: 10px 0; }
        .user-message { background: #007bff; color: white; padding: 10px; border-radius: 10px; }
        .assistant-message { background: #28a745; color: white; padding: 10px; border-radius: 10px; }
        .chat-input-wrapper { display: flex; gap: 10px; padding: 10px; }
        .chat-input { flex: 1; padding: 10px; }
        .send-btn { padding: 10px 20px; background: #667eea; color: white; border: none; border-radius: 5px; cursor: pointer; }
    </style>
</head>
<body>
    <div id="chat-messages" class="chat-messages"></div>
    <div class="chat-input-wrapper">
        <textarea id="chat-input" class="chat-input" placeholder="Type your message..."></textarea>
        <button id="send-btn" class="send-btn">Send</button>
    </div>

    <script>
        console.log('Script loaded');
        
        const chatForm = document.createElement('form');
        const chatInput = document.getElementById('chat-input');
        const sendBtn = document.getElementById('send-btn');
        const chatMessages = document.getElementById('chat-messages');
        
        let messageIdCounter = 0;
        
        chatForm.addEventListener('submit', async function(e) {
            e.preventDefault();
            console.log('Form submitted');
            
            const message = chatInput.value.trim();
            if (!message) return;
            
            console.log('Message:', message);
            
            addMessage('user', message);
            chatInput.value = '';
            
            // Simulate API call
            setTimeout(() => {
                addMessage('assistant', 'Echo: ' + message);
            }, 1000);
        });
        
        function addMessage(type, content) {
            console.log('Adding message:', type, content);
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message ' + type + '-message';
            messageDiv.textContent = content;
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }
        
        document.body.appendChild(chatForm);
        
        console.log('Setup complete');
    </script>
</body>
</html>